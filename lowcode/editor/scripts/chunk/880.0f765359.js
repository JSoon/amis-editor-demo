"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[880],{20880:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var r=a(96540),i=a(22320),n=a(36607),o=a(94802),c=a(93865),s=a(77387);function d(e){var t=window.location.hash,a=t.indexOf("?");if(-1!==a){var r=t.substring(a+1);return new URLSearchParams(r).get(e)}return""}var l=["audio","carousel","custom","log","sparkline"],m=["form","input-text","textarea","input-rich-text","input-number","radios","dict-radios","checkbox","checkboxes","dict-checkboxes","select","dict-select","switch","input-date","input-date-range","input-file","input-image"],u=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).order=9999,t}return(0,s.A)(t,e),t.prototype.buildSubRenderers=function(e,t){console.log("renderers",t);var a=d("editorType");t.forEach((function(e){e.disabledRendererPlugin=!0;var t=e.rendererName;"form"===a?m.includes(t)&&(e.disabledRendererPlugin=!1,e.isBaseComponent=!0):l.includes(t)?e.disabledRendererPlugin=!1:e.disabledRendererPlugin=!0}))},t}(i.j8V);(0,i.I0V)(u);var p=-1,h=window.location.protocol+"//"+window.location.host;/^\/amis-editor-demo/.test(window.location.pathname)&&(h+="/amis-editor");var v=h+"/schema.json",f=(0,n.WQ)("store")((0,n.PA)((function(e){var t=e.store,a=(e.location,e.history),n=e.match,s=parseInt(n.params.id,10),l=((0,c.IJ)(),d("editorType"));return s!==p&&(p=s,t.updateSchema(t.pages[s].schema)),r.createElement("div",{className:"Editor-Demo"},r.createElement("div",{className:"Editor-header"},r.createElement("div",{className:"Editor-title"},"amis 可视化编辑器"),r.createElement("div",{className:"Editor-header-actions"},r.createElement("div",{className:"flex mr-2"},r.createElement(i.eVz,null)),"form"!==l||t.preview?r.createElement("div",{className:"header-action-btn m-1 "+(t.preview?"primary":""),onClick:function(){t.setPreview(!t.preview)}},t.preview?"编辑":"预览"):null,!t.preview&&r.createElement("div",{className:"header-action-btn exit-btn",onClick:function(){a.push("/"+t.pages[s].path)}},"退出"))),r.createElement("div",{className:"Editor-inner"},r.createElement(i.KE6,{theme:"cxd",preview:t.preview,isMobile:t.isMobile,value:t.schema,onChange:function(e){t.updateSchema(e),t.updatePageSchemaAt(s)},onPreview:function(){t.setPreview(!0)},onSave:function(){t.updatePageSchemaAt(s),o.oRP.success("保存成功","提示")},className:"is-fixed",$schemaUrl:v,showCustomRenderersPanel:!0,amisEnv:{fetcher:t.fetcher,notify:t.notify,alert:t.alert,copy:t.copy}})))})))}}]);