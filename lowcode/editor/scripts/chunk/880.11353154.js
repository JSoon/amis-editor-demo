"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[880],{20880:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(96540),i=a(13942),r=a(36607),o=a(2766),c=a(93865),s=a(77387);function l(e){var t=window.location.hash,a=t.indexOf("?");if(-1!==a){var n=t.substring(a+1);return new URLSearchParams(n).get(e)}return""}var d=["audio","carousel","custom","log","sparkline"],m=["form","input-text","textarea","input-rich-text","input-number","radios","dict-radios","checkbox","checkboxes","dict-checkboxes","select","dict-select","switch","input-date","input-date-range","input-file","input-image"],u=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).order=9999,t}return(0,s.A)(t,e),t.prototype.buildSubRenderers=function(e,t){console.log("renderers",t);var a=l("editorType");t.forEach((function(e){e.disabledRendererPlugin=!0;var t=e.rendererName;"form"===a?m.includes(t)&&(e.disabledRendererPlugin=!1,e.isBaseComponent=!0):d.includes(t)?e.disabledRendererPlugin=!1:e.disabledRendererPlugin=!0}))},t}(i.j8V);(0,i.I0V)(u);var p=window.location.protocol+"//"+window.location.host;/^\/amis-editor-demo/.test(window.location.pathname)&&(p+="/amis-editor");var h=p+"/schema.json",f=(0,r.WQ)("store")((0,r.PA)((function(e){var t=e.store,a=(e.location,e.history),r=e.match,s=parseInt(r.params.id,10),d=((0,c.IJ)(),l("editorType"));return n.createElement("div",{className:"Editor-Demo"},n.createElement("div",{className:"Editor-header"},n.createElement("div",{className:"Editor-title"},"amis 可视化编辑器"),n.createElement("div",{className:"Editor-header-actions"},n.createElement("div",{className:"flex mr-2"},n.createElement(i.eVz,null)),"form"!==d||t.preview?n.createElement("div",{className:"header-action-btn m-1 "+(t.preview?"primary":""),onClick:function(){t.setPreview(!t.preview)}},t.preview?"编辑":"预览"):null,!t.preview&&n.createElement(n.Fragment,null,n.createElement("div",{className:"header-action-btn",onClick:function(){console.log("submit",t.schema)}},"提交"),n.createElement("div",{className:"header-action-btn exit-btn",onClick:function(){a.push("/"+t.pages[s].path)}},"退出")))),n.createElement("div",{className:"Editor-inner"},n.createElement(i.KE6,{theme:"cxd",preview:t.preview,isMobile:t.isMobile,value:t.schema,onInit:function(){-1!==s?t.updateSchema(t.pages[s].schema):t.updateSchema({type:"page",title:"新增页面",regions:["body"]})},onChange:function(e){t.updateSchema(e),-1!==s&&t.updatePageSchemaAt(s)},onPreview:function(){t.setPreview(!0)},onSave:function(){-1!==s&&(t.updatePageSchemaAt(s),o.oRP.success("保存成功","提示"))},className:"is-fixed",$schemaUrl:h,showCustomRenderersPanel:!0,amisEnv:{fetcher:t.fetcher,notify:t.notify,alert:t.alert,copy:t.copy}})))})))}}]);